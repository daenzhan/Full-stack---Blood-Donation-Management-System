<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–õ–∏—Ü–µ–Ω–∑–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: radial-gradient(circle, #e91e63 0%, #f8bbd0 60%, #ffffff 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            max-width: 1000px;
            width: 100%;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: #e91e63;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }
        .back-link:hover {
            background: #c2185b;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 28px;
        }
        .file-info {
            margin-bottom: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid #e91e63;
        }
        .file-info h2 {
            margin: 0 0 10px 0;
            color: #e91e63;
            font-size: 22px;
        }
        .file-info p {
            margin: 5px 0;
            color: #555;
        }
        .file-info strong {
            color: #333;
        }
        .file-container {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            background: #f9f9f9;
        }
        .file-container h3 {
            margin-top: 0;
            color: #333;
        }
        .file-view {
            width: 100%;
            min-height: 600px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background: white;
        }
        .download-btn {
            display: inline-block;
            margin-top: 15px;
            padding: 12px 24px;
            background: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }
        .download-btn:hover {
            background: #218838;
        }
        .no-file {
            padding: 40px 20px;
            text-align: center;
            color: #666;
            background: #f9f9f9;
            border-radius: 8px;
            border: 2px dashed #ddd;
        }
        .no-file h3 {
            color: #999;
            margin-top: 0;
        }
        .image-container {
            text-align: center;
            background: white;
            padding: 10px;
            border-radius: 5px;
        }
        .image-container img {
            max-width: 100%;
            max-height: 600px;
            height: auto;
            display: block;
            margin: 0 auto;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
<div class="container">
    <a th:href="@{/medcenters}" class="back-link">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>

    <h1>–õ–∏—Ü–µ–Ω–∑–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞</h1>

    <div class="file-info">
        <h2 th:text="${medCenter.name}">–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞</h2>
        <p><strong>–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</strong> <span th:text="${medCenter.location}"></span></p>
        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <span th:text="${medCenter.phone}"></span></p>
        <p><strong>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</strong> <span th:text="${medCenter.specialization}"></span></p>
    </div>

    <!-- –ï—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç -->
    <div th:if="${medCenter.license_file != null and medCenter.license_file != ''}">
        <div class="file-container">
            <h3>–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏</h3>

            <!-- –î–ª—è PDF —Ñ–∞–π–ª–æ–≤ -->
            <div th:if="${medCenter.license_file.toLowerCase().endsWith('.pdf')}">
                <iframe
                        th:src="@{'/medcenters/uploads/licenses/' + ${medCenter.license_file}}"
                        class="file-view"
                        type="application/pdf">
                    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ PDF.
                    <a th:href="@{'/medcenters/' + ${medCenter.med_center_id} + '/license/download'}">–°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª</a>
                </iframe>
            </div>

            <!-- –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π JPG/JPEG/PNG -->
            <div th:if="${medCenter.license_file.toLowerCase().endsWith('.jpg') or
                    medCenter.license_file.toLowerCase().endsWith('.jpeg') or
                    medCenter.license_file.toLowerCase().endsWith('.png')}">
                <div class="image-container">
                    <img th:src="@{'/medcenters/uploads/licenses/' + ${medCenter.license_file}}"
                         th:alt="'–õ–∏—Ü–µ–Ω–∑–∏—è ' + ${medCenter.name}"
                         onerror="this.onerror=null; this.style.display='none'; document.getElementById('error-message').style.display='block';">
                    <div id="error-message" style="display: none; color: red; padding: 20px;">
                        <p>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É</p>
                    </div>
                </div>
            </div>

            <!-- –î–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ -->
            <div th:if="${!medCenter.license_file.toLowerCase().endsWith('.pdf') and
                    !medCenter.license_file.toLowerCase().endsWith('.jpg') and
                    !medCenter.license_file.toLowerCase().endsWith('.jpeg') and
                    !medCenter.license_file.toLowerCase().endsWith('.png')}">
                <div class="no-file">
                    <p>üìÑ –§–∞–π–ª –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ.</p>
                    <p>–ò–º—è —Ñ–∞–π–ª–∞: <strong th:text="${medCenter.license_file}"></strong></p>
                    <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.</p>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è -->
            <a th:href="@{'/medcenters/' + ${medCenter.med_center_id} + '/license/download'}"
               class="download-btn">
                üì• –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –ª–∏—Ü–µ–Ω–∑–∏–∏
            </a>
        </div>
    </div>

    <!-- –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç -->
    <div th:if="${medCenter.license_file == null or medCenter.license_file == ''}">
        <div class="no-file">
            <h3>‚ùå –õ–∏—Ü–µ–Ω–∑–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞</h3>
            <p>–î–ª—è —ç—Ç–æ–≥–æ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω —Ñ–∞–π–ª –ª–∏—Ü–µ–Ω–∑–∏–∏.</p>
            <p>–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∑–∞–ø–∏—Å—å, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª.</p>
            <a th:href="@{'/medcenters/' + ${medCenter.med_center_id} + '/edit'}"
               class="back-link"
               style="margin-top: 15px;">
                –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
            </a>
        </div>
    </div>
</div>
</body>
</html>